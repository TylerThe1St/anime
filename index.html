<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ê–Ω–∏–º–µ –ü–ª–µ–µ—Ä</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #0f0f1a; color: white; text-align: center; }
        h1 { color: #00ffcc; }
        video { width: 100%; max-width: 800px; margin: 20px auto; border-radius: 10px; }
        .info { margin: 20px; }
        .poster { max-width: 200px; border-radius: 8px; margin: 10px auto; display: block; }
    </style>
</head>
<body>
    <h1>üì∫ AniPlayer</h1>

    <div class="info">
        <img id="poster" class="poster" src="" alt="–û–±–ª–æ–∂–∫–∞" style="display: none;" />
        <p><strong id="title">–ó–∞–≥—Ä—É–∑–∫–∞...</strong></p>
    </div>

    <video id="video" controls></video>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const title = urlParams.get('title') || '–ê–Ω–∏–º–µ';
        const src = urlParams.get('src');
        const poster = urlParams.get('poster');

        document.getElementById('title').textContent = title;
        const posterImg = document.getElementById('poster');
        if (poster) {
            posterImg.src = poster;
            posterImg.style.display = 'block';
        }

        const video = document.getElementById('video');

        if (!src) {
            alert('–ù–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É –∏–∑ –±–æ—Ç–∞.');
            document.getElementById('title').textContent = '–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ';
            video.style.display = 'none';
            throw new Error('No src in URL');
        }

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —á–µ—Ä–µ–∑ HLS.js
        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(src);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = src;
            video.addEventListener('loadedmetadata', () => video.play());
        } else {
            alert('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HLS. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ VLC.');
        }
    </script>
</body>
</html>
        }
    </script>
</body>

</html>
